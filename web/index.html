<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
            // version
            var version = "1.2.3";

            // set title
            var title = "Flutter Markup Language " + version;
            document.title = title;

            // set description
            var meta = document.createElement("meta");
            meta.name = "description";
            meta.content = title;
            document.head.appendChild(meta);

            // set apple-mobile-web-app-title
            var iosmeta = document.createElement("meta");
            iosmeta.name = "apple-mobile-web-app-title";
            iosmeta.content = title;
            document.head.appendChild(iosmeta);

            // add google maps
            // var script = document.createElement("script");
            // script.type    = "text/javascript";
            // script.src     = "https://maps.googleapis.com/maps/api/js?key=<your api key here>";
            // uncomment to include this functionality
            // document.head.appendChild(script);

            // add flutter.js script
            var script     = document.createElement("script");
            script.type    = "text/javascript";
            script.src     = "flutter.js?version=" + version;
            script.defer   = true;
            document.head.appendChild(script);
        </script>

        <!--
          If you are serving your web app in a path other than the root, change the
          href value below to reflect the base path you are serving from.

          The path provided below has to start and end with a slash "/" in order for
          it to work correctly.

          For more details:
          * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base

          This is a placeholder for base href that will be replaced by the value of
          the `--base-href` argument provided to `flutter build`.
        -->
        <base href="$FLUTTER_BASE_HREF">

        <meta charset="UTF-8">
        <meta content="IE=Edge" http-equiv="X-UA-Compatible">

        <!-- iOS meta tags & icons -->
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon" href="icons/Icon-192.png">

        <!-- Favicon -->
        <link rel="icon" type="image/png" href="favicon.png"/>
        <link rel="shortcut icon" type="image/png" href="favicon.png"/>

        <link rel="manifest" href="manifest.json">

        <script>
            // The value below is injected by flutter build, do not touch.
            var serviceWorkerVersion = null;
        </script>
    </head>

    <body bgcolor="white">

        <div class="centered">
            <img id="logo" class="centered" alt="Flutter Markup Langauge" height="300" width="400" src="assets/images/loading.gif"/>
        </div>

        <style type="text/css">
        .centered {
            position: fixed;
            top: 50%;
            left: 50%;
            margin-top: -150px;
            margin-left: -200px;
        }
        </style>

        <!--
        Flutter Renderer (auto, html, canvaskit)
        auto      - automatically chooses which renderer to use. This option chooses the HTML renderer when the app is running in a mobile browser, and CanvasKit renderer when the app is running in a desktop browser.
        html      - always use the HTML renderer. Uses a combination of HTML elements, CSS, Canvas elements, and SVG elements. This renderer has a smaller download size.
        canvaskit - always use the CanvasKit renderer. This renderer is fully consistent with Flutter mobile and desktop, has faster performance with higher widget density, but adds about 2MB in download size.
        -->

        <div id="loading" class="centered"></div>

        <script>
        let renderer = "canvaskit";
        console.log("Rendering with " + renderer);

        window.addEventListener('load', function(ev) {
            var loading = document.querySelector('#loading');
            // loading.textContent = "Loading entrypoint...";
            // Download main.dart.js
            _flutter.loader.loadEntrypoint({
                serviceWorker: {
                  serviceWorkerVersion: serviceWorkerVersion,
                },
                onEntrypointLoaded: async function(engineInitializer) {
                    let config = {
                        renderer: renderer ? "html" : "canvaskit",
                    }
                    // loading.textContent = "Initializing engine...";
                    let appRunner = await engineInitializer.initializeEngine(config)
                    // loading.textContent = "Running app...";
                    await appRunner.runApp();
                }
            });
        });
        </script>
    </body>
</html>